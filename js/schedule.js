function initializeCard(){cardTimes(),cardRefreshTimes()}let year,month,week,date,dates,weekStr,monthStr,asideTime,asideDay,asideDayNum,animalYear,ganzhiYear,lunarMon,lunarDay;document.addEventListener("DOMContentLoaded",()=>{initializeCard()}),document.addEventListener("pjax:complete",()=>{initializeCard()});const now=new Date;function cardRefreshTimes(){const e=document.getElementById("card-widget-schedule");e&&(asideDay=(now-asideTime)/1e3/60/60/24,e.querySelector("#pBar_year").value=asideDay,e.querySelector("#p_span_year").innerHTML=(asideDay/365*100).toFixed(1)+"%",e.querySelector(".schedule-r0 .schedule-d1 .aside-span2").innerHTML=`Faltan<a> ${(365-asideDay).toFixed(0)} </a>días`,e.querySelector("#pBar_month").value=date,e.querySelector("#pBar_month").max=dates,e.querySelector("#p_span_month").innerHTML=(date/dates*100).toFixed(1)+"%",e.querySelector(".schedule-r1 .schedule-d1 .aside-span2").innerHTML=`Faltan<a> ${dates-date} </a>días`,e.querySelector("#pBar_week").value=0===week?7:week,e.querySelector("#p_span_week").innerHTML=((0===week?7:week)/7*100).toFixed(1)+"%",e.querySelector(".schedule-r2 .schedule-d1 .aside-span2").innerHTML=`Faltan<a> ${7-(0===week?7:week)} </a>días`)}function cardTimes(){year=now.getFullYear(),month=now.getMonth(),week=now.getDay(),date=now.getDate();const e=document.getElementById("card-widget-calendar");if(e){weekStr=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"][week];const a=[{month:"Ene",days:31},{month:"Feb",days:year%4==0&&year%100!=0||year%400==0?29:28},{month:"Mar",days:31},{month:"Abr",days:30},{month:"May",days:31},{month:"Jun",days:30},{month:"Jul",days:31},{month:"Ago",days:31},{month:"Sep",days:30},{month:"Oct",days:31},{month:"Nov",days:30},{month:"Dic",days:31}];monthStr=a[month].month,dates=a[month].days;const n=(week+8-date%7)%7;let t="",r=!1,d=7-n;const o=(dates-d)%7==0?Math.floor((dates-d)/7)+1:Math.floor((dates-d)/7)+2,s=e.querySelector("#calendar-main");e.querySelector("#calendar-date").style.fontSize=["64px","48px","36px"][Math.min(o-3,2)];for(let e=0;e<o;e++){s.querySelector(`.calendar-r${e}`)||(s.innerHTML+=`<div class='calendar-r${e}'></div>`);for(let a=0;a<7;a++){0===e&&a===n&&(t=1,r=!0);const d=t===date?" class='now'":"";s.querySelector(`.calendar-r${e} .calendar-d${a} a`)||(s.querySelector(`.calendar-r${e}`).innerHTML+=`<div class='calendar-d${a}'><a${d}>${t}</a></div>`),t>=dates&&(t="",r=!1),r&&(t+=1)}}const i=chineseLunar.solarToLunar(new Date(year,month,date));animalYear=chineseLunar.format(i,"A"),ganzhiYear=chineseLunar.format(i,"T").slice(0,-1),lunarMon=chineseLunar.format(i,"M"),lunarDay=chineseLunar.format(i,"d");const l=new Date("2026/01/01 00:00:00"),c=Math.floor((l-now)/1e3/60/60/24);asideTime=new Date(`${(new Date).getFullYear()}/01/01 00:00:00`),asideDay=(now-asideTime)/1e3/60/60/24,asideDayNum=Math.floor(asideDay);const y=week-asideDayNum%7>=0?Math.ceil(asideDayNum/7):Math.ceil(asideDayNum/7)+1;e.querySelector("#calendar-week").innerHTML=`Semana ${y}`,e.querySelector("#calendar-date").innerHTML=date.toString().padStart(2,"0"),e.querySelector("#calendar-solar").innerHTML=`${weekStr}, ${date} ${monthStr} ${year}`,document.getElementById("schedule-days").innerHTML=c}}